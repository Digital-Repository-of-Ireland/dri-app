
  <%= form_tag main_app.catalog_index_path, :method => :get, :id => 'searchform', :class => 'dri_search_term_input_form' do %>
    <%
      ui_search_fields = search_fields.select do |(label, value)|
        %w[all_fields title subject person place].include?(value)
      end

      translated_field = ui_search_fields.map do |(label, value)|
        # if translation doesn't exist, fall back to blacklight label
        [t("blacklight.search.fields.label.#{value.pluralize}", default: label), value]
      end
    %>
    <%= select_tag(:search_field,
                   options_for_select(translated_field, h(params[:search_field])),
                   title: t('blacklight.search.form.search_field.title'),
                   id: "search_field",
                   class: "custom-select search-field")
    %>

    <% if params[:mode].blank? %>
        <%= hidden_field_tag 'mode', 'objects' %>
    <% end %>

    <%= render_hash_as_hidden_fields(params_for_search().except(:q, :search_field, :qt, :page, :utf8)) %>
    <!-- ID for the search box of 'q_text', to distinguish from date range search when rendering filter constraints in the UI -->
    <%= text_field_tag :q, params[:q], :placeholder => t('blacklight.search.form.q'), :id => "q", :class => "dri_search_term_text_input dri_help_popover_slow", :'data-content' =>  t('dri.help.q'),  :'data-original-title' =>  t('dri.help.q_title'), :'data-trigger' => "hover", :'data-placement' => "left" %>
    <button type="submit" class="dri_search_term_text_submit_button dri_no_display" id="search">
      <%=t('blacklight.search.form.submit')%>
    </button>
  <% end %><!-- end form -->
<!-- close dri_search_term_input_form -->
